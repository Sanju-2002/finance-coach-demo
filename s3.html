<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CryptoPay Gateway - A secure cryptocurrency payment processor with real-time exchange rates, multiple currency support, and QR code generation">
  <title>CryptoPay Gateway - Cryptocurrency Payments</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <style>
    :root {
      --primary: #0066ff;
      --primary-dark: #0055cc;
      --secondary: #00a352;
      --accent: #ff6b00;
      --background: #f9fafb;
      --card-bg: #ffffff;
      --text: #1a1a1a;
      --text-secondary: #666666;
      --border: #e1e4e8;
      --success: #10b981;
      --error: #ef4444;
      --warning: #f59e0b;
      --focus-outline: rgba(0, 102, 255, 0.25);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: var(--text);
      background-color: var(--background);
      line-height: 1.6;
    }

    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--primary);
      color: white;
      padding: 8px;
      z-index: 100;
      transition: top 0.3s;
    }

    .skip-link:focus {
      top: 0;
    }

    a {
      color: var(--primary);
      text-decoration: none;
      transition: color 0.2s;
    }

    a:hover {
      color: var(--primary-dark);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 24px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .btn:focus {
      outline: none;
      box-shadow: 0 0 0 3px var(--focus-outline);
    }

    .btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: var(--secondary);
    }

    .btn-secondary:hover {
      background-color: #008a44;
    }

    .btn-outline {
      background-color: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .btn-outline:hover {
      background-color: var(--primary);
      color: white;
    }

    .btn-white {
      background-color: white;
      color: var(--primary);
    }

    .btn-white:hover {
      background-color: #f0f0f0;
      color: var(--primary-dark);
    }

    .btn-success {
      background-color: var(--success);
      color: white;
    }

    .btn-success:hover {
      background-color: #0da271;
    }

    .icon {
      margin-right: 8px;
    }

    /* Header Styles */
    header {
      background-color: var(--card-bg);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
    }

    .logo {
      display: flex;
      align-items: center;
      font-size: 24px;
      font-weight: 700;
      color: var(--text);
    }

    .logo-icon {
      margin-right: 10px;
      color: var(--primary);
    }

    nav ul {
      display: flex;
      list-style: none;
      gap: 30px;
    }

    nav a {
      color: var(--text);
      font-weight: 500;
      transition: color 0.2s;
    }

    nav a:hover, nav a:focus {
      color: var(--primary);
    }

    .nav-buttons {
      display: flex;
      gap: 15px;
    }

    /* Payment Form Section */
    .payment-section {
      max-width: 650px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .card {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
      border: 1px solid var(--border);
    }

    .card-header {
      margin-bottom: 24px;
      text-align: center;
    }

    .card-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text);
    }

    .card-description {
      color: var(--text-secondary);
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    input, select {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background-color: var(--card-bg);
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--focus-outline);
    }

    .form-error {
      color: var(--error);
      font-size: 14px;
      margin-top: 4px;
      display: none;
    }

    .form-error.visible {
      display: block;
    }

    .form-actions {
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .conversion-result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 6px;
      background-color: #edf7ff;
      border: 1px solid #d1e5f8;
      font-weight: 500;
    }

    .conversion-result:empty {
      display: none;
    }

    /* QR Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      overflow-y: auto;
    }

    .modal-content {
      background-color: var(--card-bg);
      margin: 10% auto;
      padding: 30px;
      border-radius: 12px;
      max-width: 400px;
      position: relative;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--text-secondary);
      width: auto;
      height: auto;
      padding: 4px 8px;
      border-radius: 4px;
    }

    .modal-close:hover, .modal-close:focus {
      color: var(--text);
      background-color: rgba(0, 0, 0, 0.05);
    }

    .modal-close:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--focus-outline);
    }

    .qr-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px 0;
    }

    .qr-status {
      font-size: 14px;
      color: var(--text-secondary);
      margin-top: 8px;
    }

    .payment-uri {
      width: 100%;
      font-size: 14px;
      word-break: break-all;
      padding: 12px;
      background-color: #f8f9fa;
      border-radius: 6px;
      margin: 15px 0;
      color: var(--text);
      border: 1px solid var(--border);
    }

    /* Features Section */
    .features {
      padding: 80px 0;
    }

    .section-header {
      text-align: center;
      margin-bottom: 60px;
    }

    .section-header h2 {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .section-header p {
      color: var(--text-secondary);
      max-width: 700px;
      margin: 0 auto;
      font-size: 18px;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
    }

    .feature-card {
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s, box-shadow 0.3s;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .feature-icon {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      background-color: rgba(0, 102, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      font-size: 24px;
    }

    .feature-card h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .feature-card p {
      color: var(--text-secondary);
      flex-grow: 1;
    }

    /* Coins Section */
    .supported-coins {
      padding: 80px 0;
      background-color: var(--card-bg);
    }

    .coin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }

    .coin-card {
      background-color: var(--background);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s;
    }

    .coin-card:hover {
      transform: translateY(-5px);
    }

    .coin-icon {
      font-size: 36px;
      margin-bottom: 10px;
    }

    .coin-name {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .coin-ticker {
      color: var(--text-secondary);
      font-size: 14px;
    }

    /* CTA Section */
    .cta {
      padding: 80px 0;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      text-align: center;
    }

    .cta h2 {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .cta p {
      font-size: 18px;
      max-width: 700px;
      margin: 0 auto 30px;
    }

    .cta-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    /* Footer */
    footer {
      background-color: #1a1a1a;
      color: white;
      padding: 60px 0 30px;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 40px;
      margin-bottom: 40px;
    }

    .footer-column h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      position: relative;
    }

    .footer-column h3:after {
      content: "";
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 30px;
      height: 2px;
      background-color: var(--primary);
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 10px;
    }

    .footer-links a {
      color: #a3a3a3;
      transition: color 0.2s;
    }

    .footer-links a:hover {
      color: white;
    }

    .footer-social {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .footer-social a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
      transition: background-color 0.2s;
    }

    .footer-social a:hover {
      background-color: var(--primary);
    }

    .footer-bottom {
      padding-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .footer-bottom p {
      color: #a3a3a3;
      font-size: 14px;
    }

    .footer-legal {
      display: flex;
      gap: 20px;
    }

    .footer-legal a {
      color: #a3a3a3;
      font-size: 14px;
      transition: color 0.2s;
    }

    .footer-legal a:hover {
      color: white;
    }

    /* Login/Register Modal */
    .auth-tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }

    .auth-tab {
      flex: 1;
      text-align: center;
      padding: 12px;
      font-weight: 600;
      cursor: pointer;
      color: var(--text-secondary);
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }

    .auth-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .auth-form {
      display: none;
    }

    .auth-form.active {
      display: block;
    }

    /* Media Queries */
    @media (max-width: 768px) {
      .header-inner {
        flex-wrap: wrap;
      }

      .nav-desktop {
        display: none;
      }

      .feature-grid, 
      .coin-grid {
        grid-template-columns: 1fr;
      }

      .cta-buttons {
        flex-direction: column;
      }

      .modal-content {
        margin: 20% auto;
        width: 90%;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }

    @media (prefers-contrast: high) {
      :root {
        --primary: #0000ff;
        --primary-dark: #0000cc;
        --secondary: #008000;
        --text: #000000;
        --background: #ffffff;
        --card-bg: #ffffff;
        --border: #000000;
        --focus-outline: rgba(0, 0, 255, 0.5);
      }

      .card, input, select, .conversion-result, .payment-uri {
        border-width: 2px;
      }

      .btn {
        border: 2px solid black;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-inner">
        <div class="logo">
          <span class="logo-icon" aria-hidden="true">💸</span>
          <span>CryptoPay</span>
        </div>

        <nav class="nav-desktop" aria-label="Main navigation">
          <ul>
            <li><a href="#payment-form">Payment</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#cryptocurrencies">Cryptocurrencies</a></li>
            <li><a href="#support">Support</a></li>
          </ul>
        </nav>

        <div class="nav-buttons">
          <button class="btn btn-outline" id="login-btn" aria-haspopup="dialog">Log In</button>
          <button class="btn" id="signup-btn" aria-haspopup="dialog">Sign Up</button>
        </div>
      </div>
    </div>
  </header>

  <main id="main-content">
    <!-- Payment Form Section -->
    <section class="payment-section" id="payment-form">
      <div class="card" role="region" aria-labelledby="payment-title">
        <div class="card-header">
          <h1 id="payment-title" class="card-title">Cryptocurrency Payment</h1>
          <p class="card-description">Select a cryptocurrency, enter an amount, and generate a payment QR code</p>
        </div>
        
        <form id="crypto-payment-form" aria-labelledby="payment-title">
          <div class="form-group">
            <label for="crypto">Select Cryptocurrency</label>
            <select 
              id="crypto" 
              name="crypto" 
              aria-required="true"
              aria-describedby="crypto-help"
            >
              <option value="bitcoin">BTC (Bitcoin)</option>
              <option value="ethereum">ETH (Ethereum)</option>
              <option value="tether">USDT (Tether)</option>
              <option value="cardano">ADA (Cardano)</option>
              <option value="solana">SOL (Solana)</option>
              <option value="dogecoin">DOGE (Dogecoin)</option>
              <option value="polkadot">DOT (Polkadot)</option>
              <option value="litecoin">LTC (Litecoin)</option>
              <option value="ripple">XRP (Ripple)</option>
              <option value="chainlink">LINK (Chainlink)</option>
            </select>
            <span id="crypto-help" class="sr-only">Choose which cryptocurrency you want to pay with</span>
          </div>

          <div class="form-group">
            <label for="amount">Enter Amount</label>
            <input 
              type="number" 
              id="amount" 
              name="amount"
              placeholder="e.g., 0.01" 
              step="0.0001" 
              min="0.0001" 
              aria-required="true"
              aria-describedby="amount-help amount-error"
            />
            <span id="amount-help" class="sr-only">Enter the amount of cryptocurrency you want to convert</span>
            <div id="amount-error" class="form-error" aria-live="polite"></div>
          </div>

          <div class="form-actions">
            <button 
              type="button" 
              class="btn"
              id="convert-btn"
              onclick="convertCrypto()"
              aria-controls="conversion-result"
            >
              <span class="icon" aria-hidden="true">💱</span>
              Convert to EUR
            </button>
            
            <div 
              id="conversion-result" 
              class="conversion-result" 
              aria-live="polite" 
              role="status"
              aria-atomic="true"
            ></div>

            <button 
              type="button" 
              class="btn" 
              id="pay-btn"
              onclick="showQR()"
              aria-haspopup="dialog"
            >
              <span class="icon" aria-hidden="true">📱</span>
              Generate Payment QR
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
      <div class="container">
        <div class="section-header">
          <h2>Why Choose CryptoPay Gateway</h2>
          <p>Our platform offers everything you need to start accepting cryptocurrency payments today.</p>
        </div>

        <div class="feature-grid">
          <div class="feature-card">
            <div class="feature-icon" aria-hidden="true">💰</div>
            <h3>Multi-Currency Support</h3>
            <p>Accept payments in Bitcoin, Ethereum, and 8 other major cryptocurrencies with plans to add more in the future.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon" aria-hidden="true">📈</div>
            <h3>Real-Time Exchange Rates</h3>
            <p>Always get the most current exchange rates from trusted sources for accurate pricing and conversions.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon" aria-hidden="true">🔌</div>
            <h3>Easy Integration</h3>
            <p>Integrate with your existing website or app in minutes with our simple API or pre-built components.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon" aria-hidden="true">⚡</div>
            <h3>Instant Confirmations</h3>
            <p>Receive payment confirmations immediately, no need to wait for blockchain confirmations.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon" aria-hidden="true">🎨</div>
            <h3>Customizable QR Codes</h3>
            <p>Create beautiful, branded payment experiences with customizable QR codes and checkout pages.</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon" aria-hidden="true">📊</div>
            <h3>Detailed Analytics</h3>
            <p>Get insights into your transactions with comprehensive reporting and analytics tools.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Supported Coins Section -->
    <section class="supported-coins" id="cryptocurrencies">
      <div class="container">
        <div class="section-header">
          <h2>Supported Cryptocurrencies</h2>
          <p>We support a wide range of cryptocurrencies with plans to add more in the future.</p>
        </div>

        <div class="coin-grid">
          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">₿</div>
            <div class="coin-name">Bitcoin</div>
            <div class="coin-ticker">BTC</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">Ξ</div>
            <div class="coin-name">Ethereum</div>
            <div class="coin-ticker">ETH</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">₮</div>
            <div class="coin-name">Tether</div>
            <div class="coin-ticker">USDT</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">XRP</div>
            <div class="coin-name">Ripple</div>
            <div class="coin-ticker">XRP</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">₳</div>
            <div class="coin-name">Cardano</div>
            <div class="coin-ticker">ADA</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">◎</div>
            <div class="coin-name">Solana</div>
            <div class="coin-ticker">SOL</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">Ð</div>
            <div class="coin-name">Dogecoin</div>
            <div class="coin-ticker">DOGE</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">DOT</div>
            <div class="coin-name">Polkadot</div>
            <div class="coin-ticker">DOT</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">Ł</div>
            <div class="coin-name">Litecoin</div>
            <div class="coin-ticker">LTC</div>
          </div>

          <div class="coin-card">
            <div class="coin-icon" aria-hidden="true">LINK</div>
            <div class="coin-name">Chainlink</div>
            <div class="coin-ticker">LINK</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta" id="support">
      <div class="container">
        <h2>Ready to Accept Cryptocurrency Payments?</h2>
        <p>Join thousands of businesses using CryptoPay Gateway to process millions in cryptocurrency transactions every month.</p>
        <div class="cta-buttons">
          <button class="btn btn-white" onclick="document.getElementById('signup-btn').click()">Create Free Account</button>
          <a href="#payment-form" class="btn btn-outline">Try Demo</a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>CryptoPay</h3>
          <p>The easiest way to accept cryptocurrency payments for your business.</p>
          <div class="footer-social">
            <a href="#" aria-label="Twitter">
              <span aria-hidden="true">𝕏</span>
            </a>
            <a href="#" aria-label="Facebook">
              <span aria-hidden="true">f</span>
            </a>
            <a href="#" aria-label="LinkedIn">
              <span aria-hidden="true">in</span>
            </a>
            <a href="#" aria-label="GitHub">
              <span aria-hidden="true">GH</span>
            </a>
          </div>
        </div>

        <div class="footer-column">
          <h3>Product</h3>
          <ul class="footer-links">
            <li><a href="#">Features</a></li>
            <li><a href="#">Pricing</a></li>
            <li><a href="#">API</a></li>
            <li><a href="#">Documentation</a></li>
            <li><a href="#">Integrations</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Company</h3>
          <ul class="footer-links">
            <li><a href="#">About Us</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Resources</h3>
          <ul class="footer-links">
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Community</a></li>
            <li><a href="#">Status</a></li>
            <li><a href="#">Security</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 CryptoPay Gateway. All rights reserved.</p>
        <div class="footer-legal">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Cookies</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- QR Code Modal -->
  <div 
    id="qr-modal" 
    class="modal" 
    role="dialog" 
    aria-labelledby="qr-modal-title" 
    aria-describedby="qr-description"
    aria-hidden="true"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="qr-modal-title" class="modal-title">Scan to Pay</h2>
        <button 
          id="close-modal-btn" 
          class="modal-close" 
          onclick="closeQR()" 
          aria-label="Close payment dialog"
        >
          &times;
        </button>
      </div>
      
      <p id="qr-description" class="sr-only">A QR code that contains your payment information. Scan this with your cryptocurrency wallet app to make a payment.</p>
      
      <div class="qr-container">
        <canvas id="qr-canvas" aria-hidden="true"></canvas>
        <span id="qr-status" class="qr-status" aria-live="polite">Scan this QR code with your wallet app</span>
      </div>
      
      <div 
        id="payment-uri" 
        class="payment-uri" 
        tabindex="0" 
        aria-label="Payment link URI"
      ></div>
      
      <button 
        class="btn btn-success" 
        id="copy-btn"
        onclick="copyAddress()" 
        aria-controls="copy-status"
      >
        <span class="icon" aria-hidden="true">📋</span>
        Copy Payment URI
      </button>
      
      <div id="copy-status" aria-live="polite" class="sr-only"></div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div id="auth-modal" class="modal" role="dialog" aria-labelledby="auth-modal-title" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="auth-modal-title" class="modal-title">Account Access</h2>
        <button class="modal-close" onclick="closeAuthModal()" aria-label="Close login dialog">&times;</button>
      </div>
      
      <div class="auth-tabs" role="tablist">
        <div 
          id="login-tab" 
          class="auth-tab active" 
          role="tab" 
          aria-selected="true" 
          aria-controls="login-form"
          tabindex="0"
          onclick="switchTab('login')"
          onkeydown="handleTabKeydown(event, 'login')"
        >
          Log In
        </div>
        <div 
          id="register-tab" 
          class="auth-tab" 
          role="tab" 
          aria-selected="false" 
          aria-controls="register-form"
          tabindex="0"
          onclick="switchTab('register')"
          onkeydown="handleTabKeydown(event, 'register')"
        >
          Sign Up
        </div>
      </div>
      
      <div id="login-form" class="auth-form active" role="tabpanel" aria-labelledby="login-tab">
        <form id="login-form-element">
          <div class="form-group">
            <label for="login-email">Email</label>
            <input 
              type="email" 
              id="login-email" 
              name="email" 
              required 
              aria-required="true"
              autocomplete="email"
            />
          </div>
          <div class="form-group">
            <label for="login-password">Password</label>
            <input 
              type="password" 
              id="login-password" 
              name="password" 
              required 
              aria-required="true"
              autocomplete="current-password"
            />
          </div>
          <div class="form-actions">
            <button type="submit" class="btn">Log In</button>
          </div>
        </form>
      </div>
      
      <div id="register-form" class="auth-form" role="tabpanel" aria-labelledby="register-tab" hidden>
        <form id="register-form-element">
          <div class="form-group">
            <label for="register-name">Full Name</label>
            <input 
              type="text" 
              id="register-name" 
              name="name" 
              required 
              aria-required="true"
              autocomplete="name"
            />
          </div>
          <div class="form-group">
            <label for="register-email">Email</label>
            <input 
              type="email" 
              id="register-email" 
              name="email" 
              required 
              aria-required="true"
              autocomplete="email"
            />
          </div>
          <div class="form-group">
            <label for="register-password">Password</label>
            <input 
              type="password" 
              id="register-password" 
              name="password" 
              required 
              aria-required="true"
              autocomplete="new-password"
              aria-describedby="password-requirements"
            />
            <span id="password-requirements" class="sr-only">Password must be at least 8 characters long</span>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn">Create Account</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Wallet addresses for supported cryptocurrencies
    const wallets = {
      bitcoin: "1BoatSLRHtKNngkdXEeobR76b53LETtpyT",
      ethereum: "0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe",
      tether: "TVjsJTAewjZpyuWVtkZWyUMxgJZtdugd7N",
      cardano: "addr1qycvl4shgx2vqfm2j02xp7fmwugn3v7e7rmfpxkln7djdgsnhevjnfkc87qzv8vq0cexydl9gzc4fjk2khc9m4kpjqls2w3ds0",
      solana: "9yjjyRgHYbwh3CegpzKz8yvgNgTdyrTg9uJZxnE7xmEr",
      dogecoin: "D5jNqKpnmRRMbPPRkMCzFNvbkQJ7kxPUNp",
      polkadot: "12xY3SviSVjbvANsSy7pnNxdv8FQQyMQNNYtw8QehxVVTGQw",
      litecoin: "MUVz3KpJM7C8bKJQaLCNi6uKXFpo8nzPvQ",
      ripple: "rDsbeomae4FXwgQTJp9Rs64Qg9vDiTCdBv",
      chainlink: "0x4BbeEB066eD09B7AEd07bF39EEe0460DFa261520"
    };

    let currentQRText = "";
    let lastFocusedElementBeforeModal = null;

    // Auth modal functionality
    document.getElementById('login-btn').addEventListener('click', () => {
      openAuthModal('login');
    });

    document.getElementById('signup-btn').addEventListener('click', () => {
      openAuthModal('register');
    });

    function openAuthModal(tab) {
      const modal = document.getElementById('auth-modal');
      modal.style.display = 'block';
      modal.setAttribute('aria-hidden', 'false');
      
      switchTab(tab);
      
      lastFocusedElementBeforeModal = document.activeElement;
      
      // Set focus to the first field
      setTimeout(() => {
        if (tab === 'login') {
          document.getElementById('login-email').focus();
        } else {
          document.getElementById('register-name').focus();
        }
        trapFocus(modal);
      }, 100);
    }

    function closeAuthModal() {
      const modal = document.getElementById('auth-modal');
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      
      if (lastFocusedElementBeforeModal) {
        lastFocusedElementBeforeModal.focus();
      }
    }

    function switchTab(tabName) {
      // Update tab state
      document.querySelectorAll('.auth-tab').forEach(tab => {
        tab.classList.remove('active');
        tab.setAttribute('aria-selected', 'false');
      });
      
      document.querySelectorAll('.auth-form').forEach(form => {
        form.classList.remove('active');
        form.hidden = true;
      });
      
      // Activate selected tab
      const selectedTab = document.getElementById(`${tabName}-tab`);
      const selectedForm = document.getElementById(`${tabName}-form`);
      
      selectedTab.classList.add('active');
      selectedTab.setAttribute('aria-selected', 'true');
      
      selectedForm.classList.add('active');
      selectedForm.hidden = false;
      
      // Update modal title
      document.getElementById('auth-modal-title').textContent = 
        tabName === 'login' ? 'Log In to Your Account' : 'Create an Account';
    }

    function handleTabKeydown(event, tabName) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        switchTab(tabName);
      }
    }

    // Process forms
    document.getElementById('login-form-element').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Login functionality would connect to the backend here.');
      // In a real implementation, this would authenticate with the server
    });

    document.getElementById('register-form-element').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Registration functionality would connect to the backend here.');
      // In a real implementation, this would register a new user
    });

    // Trap focus inside modal when open
    function trapFocus(element) {
      const focusableElements = element.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
      );
      
      const firstFocusableElement = focusableElements[0];
      const lastFocusableElement = focusableElements[focusableElements.length - 1];

      element.addEventListener('keydown', function(e) {
        if (e.key === 'Tab') {
          if (e.shiftKey) {
            if (document.activeElement === firstFocusableElement) {
              lastFocusableElement.focus();
              e.preventDefault();
            }
          } else {
            if (document.activeElement === lastFocusableElement) {
              firstFocusableElement.focus();
              e.preventDefault();
            }
          }
        }
        
        if (e.key === 'Escape') {
          if (element.id === 'qr-modal') {
            closeQR();
          } else if (element.id === 'auth-modal') {
            closeAuthModal();
          }
        }
      });
    }

    // Validate amount input
    function validateAmount() {
      const amount = parseFloat(document.getElementById('amount').value);
      const errorElement = document.getElementById('amount-error');
      
      if (isNaN(amount) || amount <= 0) {
        errorElement.textContent = "Please enter a valid amount greater than zero.";
        errorElement.classList.add('visible');
        return false;
      } else {
        errorElement.textContent = "";
        errorElement.classList.remove('visible');
        return true;
      }
    }

    // Handle form input events
    document.getElementById('amount').addEventListener('input', validateAmount);
    document.getElementById('amount').addEventListener('blur', validateAmount);

    async function convertCrypto() {
      if (!validateAmount()) return;
      
      const crypto = document.getElementById('crypto').value;
      const amount = parseFloat(document.getElementById('amount').value);
      const resultElement = document.getElementById('conversion-result');
      
      // Show loading state
      resultElement.textContent = "Converting...";
      
      try {
        const res = await axios.get(`https://api.coingecko.com/api/v3/simple/price?ids=${crypto}&vs_currencies=eur`);
        const rate = res.data[crypto].eur;
        const converted = (amount * rate).toFixed(2);
        const cryptoSymbol = crypto.charAt(0).toUpperCase() + crypto.slice(1);
        
        resultElement.innerHTML = `
          <span aria-hidden="true">💶</span> Equivalent in EUR: €${converted}<br>
          <small>1 ${cryptoSymbol} = €${rate}</small>
        `;
      } catch (error) {
        resultElement.textContent = "Error fetching exchange rate. Please try again later.";
        console.error("API Error:", error);
      }
    }

    function showQR() {
      if (!validateAmount()) {
        document.getElementById('amount').focus();
        return;
      }
      
      const crypto = document.getElementById('crypto').value;
      const amount = parseFloat(document.getElementById('amount').value);
      const modal = document.getElementById("qr-modal");
      
      // Update aria attributes
      modal.setAttribute('aria-hidden', 'false');
      
      const walletAddress = wallets[crypto];
      const uri = `${crypto}:${walletAddress}?amount=${amount}`;
      currentQRText = uri;

      const qr = new QRious({
        element: document.getElementById('qr-canvas'),
        size: 200,
        value: uri,
        level: 'H', // High error correction for better accessibility
        background: '#ffffff',
        foreground: '#000000'
      });

      document.getElementById("payment-uri").textContent = uri;
      document.getElementById("qr-status").textContent = `QR code generated for ${amount} ${crypto.toUpperCase()}`;
      
      // Show the modal
      modal.style.display = "block";
      
      // Set focus to close button when modal opens
      lastFocusedElementBeforeModal = document.activeElement;
      setTimeout(() => {
        document.getElementById('close-modal-btn').focus();
        trapFocus(modal);
      }, 100);
    }

    function copyAddress() {
      navigator.clipboard.writeText(currentQRText).then(() => {
        document.getElementById('copy-status').textContent = "Payment URI copied to clipboard!";
        // Also provide visual feedback
        const copyBtn = document.getElementById('copy-btn');
        const originalText = copyBtn.innerHTML;
        copyBtn.innerHTML = '<span class="icon" aria-hidden="true">✓</span> Copied!';
        
        setTimeout(() => {
          copyBtn.innerHTML = originalText;
        }, 2000);
      }).catch(err => {
        document.getElementById('copy-status').textContent = "Failed to copy. Please select and copy manually.";
        console.error('Could not copy text: ', err);
      });
    }

    function closeQR() {
      const modal = document.getElementById("qr-modal");
      modal.style.display = "none";
      modal.setAttribute('aria-hidden', 'true');
      
      // Return focus to element that had focus before modal opened
      if (lastFocusedElementBeforeModal) {
        lastFocusedElementBeforeModal.focus();
      }
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      // QR Modal
      const qrModal = document.getElementById("qr-modal");
      if (event.target === qrModal) {
        closeQR();
      }
      
      // Auth Modal
      const authModal = document.getElementById("auth-modal");
      if (event.target === authModal) {
        closeAuthModal();
      }
    }
    
    // Initialize a larger QR code if the screen is large enough
    function initializeQRSize() {
      if (window.innerWidth > 480) {
        const canvas = document.getElementById('qr-canvas');
        if (canvas) {
          canvas.width = 250;
          canvas.height = 250;
        }
      }
    }
    
    // Announce to screen readers when the page is fully loaded
    window.addEventListener('load', function() {
      initializeQRSize();
      
      // Check for URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('crypto') && urlParams.has('amount')) {
        const crypto = urlParams.get('crypto');
        const amount = urlParams.get('amount');
        
        // If valid parameters, auto-fill the form
        if (wallets[crypto] && !isNaN(parseFloat(amount))) {
          document.getElementById('crypto').value = crypto;
          document.getElementById('amount').value = amount;
          // Automatically convert if parameters are present
          convertCrypto();
        }
      }
    });
  </script>
</body>
</html>
